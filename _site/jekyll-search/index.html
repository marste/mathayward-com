


<!DOCTYPE html>
<html dir="ltr" lang="en-GB">
    <head>
        <title>Jekyll search with JSON ~ Front-end Developer ~ Mat Hayward</title>
        

        <!-- Scripts -->
        <script src="/static/js/build/app.min.js" async></script>
        <script type="text/javascript">try{Typekit.load();}catch(e){}</script>

        <!-- Icons -->
        <link rel="shortcut icon" type="image/png" href="/static/images/icons/favicon.png">

        <!-- Styles -->
        <link rel="stylesheet" type="text/css" media="all" href="/static/css/screen.css">

        <!-- Meta -->
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="Without a database there's nothing to query when wanting a search function, so I went about building a work around.">
        <meta name="author" content="Mat Hayward">
        <meta name="keywords" content="Jekyll search JSON">

        <!-- RSS -->
        <link rel="alternate" type="application/rss+xml" title="RSS Feed" href="http://mathayward.com/feed.xml">

        <!-- SEARCH -->
        <link rel="search" type="application/opensearchdescription+xml" title="Mat Hayward" href="/opensearch.xml">

        <!-- Facebook Open Graph -->
        <meta property="og:site_name" content="Mat Hayward">
        <meta property="og:description" content="Without a database there's nothing to query when wanting a search function, so I went about building a work around.">
        <meta property="og:title" content="Jekyll search with JSON ~ Front-end Developer ~ Mat Hayward">
        <meta property="og:type" content="website">
        <meta property="og:url" content="http://mathayward.com/jekyll-search">
        <meta property="og:image" content="http://mathayward.com/static/images/social/search.jpg">
        <meta property="og:updated_time" content="2014-02-26T17:33:00+00:00">


        <!-- Twitter Card -->
        <meta name="twitter:card" content="summary">
        <meta name="twitter:site" content="@mathaywarduk">
        <meta name="twitter:domain" content="mathayward.com">
        <meta name="twitter:creator" content="@mathaywarduk">
        <meta name="twitter:image:src" content="http://mathayward.com/static/images/social/search.jpg">
        <meta name="twitter:description" content="Without a database there's nothing to query when wanting a search function, so I went about building a work around.">
        <meta name="twitter:title" content="Jekyll search with JSON ~ Front-end Developer ~ Mat Hayward">
        <meta name="twitter:url" content="http://mathayward.com/jekyll-search/">

    </head>
    <body class="no-js">
        <b id="top"></b>
        <header class="header" itemscope itemtype="http://data-vocabulary.org/Person">
            <div class="header__avatar">
                <a href="/"><img src="https://lh3.googleusercontent.com/-QlmUfD33DRk/AAAAAAAAAAI/AAAAAAAABig/NVgoYx97Y1U/s120-c/photo.jpg" alt="Oooo yeah, click my face!" title="Oooo yeah, click my face!"></a>
            </div>

            <h1 itemprop="name"><a href="/">Mat Hayward</a></h1>
            <div class="subheader">Nottingham&rsquo;s answer to a question nobody asked.</div>
            <div class="layout--hidden">
                <a href="http://mathayward.com" itemprop="url">mathayward.com</a>.
                <span itemprop="address" itemscope
                itemtype="http://data-vocabulary.org/Address">
                <span itemprop="locality">Nottingham</span>
                <span itemprop="country-name">United Kingdom</span>
                <span itemprop="title">Front-end developer</span> at <span itemprop="affiliation">Erskine Design</span>
                </span>
            </div>
            <nav class="nav">
                <a href="/" class="nav__item" title="Ramblings and such">Read</a><span class="nav__divider"> | </span>
                <a href="/work" class="nav__item" title="Details of where I've worked with selected projects">Work</a><span class="nav__divider"> | </span>
                <a href="/photography" class="nav__item" title="Some of the photographs I've taken">Photography</a><span class="nav__divider"> | </span>
                <a href="/search" class="nav__item" title="Feeling lazy? Use the search function to find things quickly">Search</a></b>
            </nav>
        </header>

        <article class="content-block post" id="article-top">

            




    























    
    




<div class="post__text-wrapper">
    <header class="post__header">
        <h1>Jekyll search with JSON</h1>
        <h2 class="post__date">Wednesday 26th February 2014</h2>
    </header>
</div>

<section class="post__content" role="main">
    <div class="post__text-wrapper">
        <p>You may or may not know that this site is built using <a href="http://jekyllrb.com">Jekyll</a>, a static site generator. That means there&#39;s no database, so page load speed is much faster.</p>

<p>Without a database though, there&#39;s nothing to query when needed, i.e. when wanting a <a href="/search">search function</a>, so I went about building a work around.</p>

<p>With the <a href="http://jekyllrb.com/docs/templates/">Liquid templating</a> language, used by Jekyll, I built a <a href="/feeds/feed.json">JSON encoded feed</a> for posts and pages on the site which I wanted to show up in search results.</p>

<pre><code>[
    {
        "title": "{{post.title}}",
        "content": "{{post.content | markdownify | strip_html"}}",
        "link": "{{site.url}}{{post.url}}",
        "date": "{{post.date}}",
        "excerpt": "{{post.snippet}}"
    }
    ...
]</code></pre>

<p>I then wrote a Javascript plugin which receives a search term, either from a querystring or a form submission, and looks for the term within the JSON feed.</p>

<p>With this data, it&#39;s pretty simple to output the results directly into the DOM using a template partial.</p>

<figure class="media">
    <img src="/static/images/blog/jekyll-search.png" alt="Jekyll search" class="media__item">
</figure>

<p>That&#39;s it explained in it&#39;s simplest form anyway. Try it out for yourself over on the <a href="/search">search page</a> and let me know what you think.</p>

<p>If you are interested in exactly how I&#39;ve gone about this, you&#39;re in luck. It&#39;s definitely not perfect yet, but, regardless, I have released the code <a href="https://github.com/mathaywarduk/jekyll-search">on GitHub</a> so other Jekyll users can use it, alter it, even improve on it.</p>

<p>There are a few things things I&#39;d like to fix/tidy up in the future, like:</p>

<ul>
<li><p>The JSON feed isn&#39;t very &#39;pretty&#39; - I know this isn&#39;t important, but I&#39;m all for well-formed markup.</p></li>
<li><p>Date formatting would be nice. - I&#39;ve done this on this site myself by tweaking the Javascript file, but it&#39;s not ideal to force people to use my date formatting, so it&#39;s not in the repo. </p></li>
<li><p>Make the script into a jQuery plugin - This would make it possible to customise your search function without having to change the plugin itself.</p></li>
</ul>


        
    </div>


    <div class="social">
        <h4 class="social__header">Share <em>&ldquo;Jekyll search with JSON&rdquo;</em></h4>
        <ul class="social__links">
            <li><a href="https://twitter.com/intent/tweet?url=http%3A%2F%2Fmathayward.com/jekyll-search&amp;related=mathaywarduk&amp;text=%E2%80%9CJekyll search with JSON%E2%80%9D+(via+@mathaywarduk)" class="social__link social__link--twitter"data-popup data-popup-width="685" data-popup-height="500">on Twitter</a></li>
            <li><a href="http://www.facebook.com/sharer/sharer.php?s=100&amp;u=http%3A%2F%2Fmathayward.com/jekyll-search&amp;t=%E2%80%9CJekyll search with JSON%E2%80%9D+by+Mat+Hayward" class="social__link social__link--facebook" data-popup data-popup-width="685" data-popup-height="500">on Facebook</a></li>
        </ul>
    </div>

    

    
        <div class="nav--cycle">
    
    
    
        <a href="/modular-css-with-sass-and-bem" class="nav__item--cycle nav__item--cycle--previous">
            <h2>Modular CSS with Sass &amp; BEM</h2>
        </a>
    
    

    
        </div>
    
    
</section>



            <footer class="post__footer">
                <nav class="nav--footer">
                    <p>&copy; <a href="https://plus.google.com/117510067130914002427?rel=author" class="nav__item">Mat Hayward</a> | <a href="http://www.twitter.com/mathaywarduk" class="nav__item" title="Follow me">Twitter</a></p>
                    <a href="#top" class="nav__item nav__item--top" data-scroll-to-target>Back to top</a>
                </nav>
            </footer>
        </article>
    </body>
</html>
